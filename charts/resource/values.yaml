global:
  environment: ""  # Will be set by ArgoCD (qa, prod, shared)
  accountId: ""    # Will be set by ArgoCD
  providerConfig: ""  # Will be set by ArgoCD
  oidcProviderId: ""  # Will be set by ArgoCD
  region: us-east-2
  deletionPolicy: "Orphan"  # Will be set by ArgoCD (Delete for QA, Orphan for Prod)
  tags:
    managed-by: crossplane
    department: engineering

# Resource name - used as a base for all resource names
resourceName: ""

# S3 bucket configurations
s3:
  buckets: []
  # Example bucket configuration:
  # - name: my-bucket
  #   publicAccess: false
  #   enableEncryption: true
  #   enableVersioning: true
  #   enableAcceleration: false
  #   objectLockEnabled: false
  #   createPolicy: false  # Set to true to create an IAM policy for this bucket
  #   attachToRole: ""     # IAM role name to attach the policy to (requires createPolicy: true)
  #                       # For apps, use format: {app-name}-{environment} (e.g., platform-api-qa)
  #   lifecycleRules: []
  #   corsRules: []
  #   websiteConfiguration: {}
  #   notificationConfiguration: {}
  #   tags: {}

# RDS Aurora cluster configurations
rds:
  clusters: []
  # Minimal configuration - everything auto-configured based on environment:
  # - name: my-app-db-qa
  #   # That's it! The following are auto-configured:
  #   # - Password: Auto-generated random 32-char password
  #   # - QA Subnets: subnet-06b3bc451435c90c3, subnet-03c3b3c8377cb3f88
  #   # - Prod Subnets: subnet-0bc4961ea0f8b699d, subnet-0e0efa4896e447362
  #   # - Security Group: Auto-created with access from:
  #   #   - QA: sg-023605daa63299b42
  #   #   - Prod: sg-004477da6d81e6cdf
  #   # - Secret Keys: POSTGRES_HOST, POSTGRES_PORT, POSTGRES_USER, POSTGRES_PASSWORD, POSTGRES_DB, POSTGRES_HOST_READ_ONLY
  #
  # Full configuration example:
  # - name: my-aurora-cluster
  #   engine: aurora-postgresql              # Options: aurora-postgresql, aurora-mysql
  #   engineVersion: "16.4"                  # Default: 16.4 for PostgreSQL, 8.0.mysql_aurora.3.07.1 for MySQL
  #   engineMode: provisioned                # Options: provisioned, serverless (v1)
  #
  #   # Database configuration
  #   databaseName: mydb                     # Default: postgres
  #   masterUsername: admin                  # Default: postgres
  #   masterUserPasswordSecretRef:           # OPTIONAL - Auto-generated if not provided
  #     name: db-master-password             # If omitted, a random password is generated
  #     namespace: crossplane-system
  #     key: password
  #
  #   # Secret key customization (OPTIONAL - customize AWS Secrets Manager key names)
  #   secretKeyNames:
  #     host: DB_URL                         # Default: POSTGRES_HOST
  #     port: DB_PORT                        # Default: POSTGRES_PORT
  #     user: DB_USER                        # Default: POSTGRES_USER
  #     password: DB_PASSWORD                # Default: POSTGRES_PASSWORD
  #     database: DB_NAME                    # Default: POSTGRES_DB
  #     readOnlyHost: DB_READ_REPLICA_URL    # Default: POSTGRES_HOST_READ_ONLY
  #     url: POSTGRES_URL                    # Optional: Single connection URI (postgresql+psycopg://user:pass@host:port/db)
  #     # OR use 'urls' for multiple connection strings with different drivers/databases:
  #     urls:
  #       - name: PREFECT_API_DATABASE_CONNECTION_URL
  #         driver: postgresql+asyncpg       # Default: postgresql+psycopg
  #         database: prefect                # Default: uses cluster's databaseName
  #       - name: POSTGRES_URL
  #         driver: postgresql+psycopg
  #         database: scraping_data
  #
  #   # Network configuration (OPTIONAL - auto-configured based on environment)
  #   subnetIds:                             # OPTIONAL - Uses env defaults if omitted
  #     - subnet-xxxxx                       # QA default: subnet-06b3bc451435c90c3, subnet-03c3b3c8377cb3f88
  #     - subnet-yyyyy                       # Prod default: subnet-0bc4961ea0f8b699d, subnet-0e0efa4896e447362
  #   vpcSecurityGroupIds:                   # OPTIONAL - Auto-created if omitted
  #     - sg-xxxxx                           # If omitted, creates SG with access from qa/prod app SGs
  #   vpcId: vpc-xxxxx                       # OPTIONAL - Used when auto-creating security group
  #
  #   # Instance configuration
  #   instanceCount: 2                       # Number of instances (default: 1)
  #   instanceClass: db.t4g.medium          # Default: db.t4g.medium (provisioned) or db.serverless
  #   instanceType: provisioned              # Options: provisioned, serverless
  #
  #   # Serverless v2 scaling (optional, for provisioned mode with serverless instances)
  #   serverlessV2ScalingConfiguration:
  #     minCapacity: 0.5                     # ACUs (0.5 to 128)
  #     maxCapacity: 1                       # ACUs (0.5 to 128)
  #
  #   # Backup configuration
  #   backupRetentionPeriod: 7               # Days (default: 7)
  #   preferredBackupWindow: "03:00-04:00"   # UTC time window
  #   preferredMaintenanceWindow: "mon:04:00-mon:05:00"
  #   skipFinalSnapshot: false               # Set to true for non-prod environments
  #
  #   # Security
  #   storageEncrypted: true                 # Default: true
  #   kmsKeyId: ""                          # Optional KMS key ARN for encryption
  #   deletionProtection: false              # Enable for production
  #   publiclyAccessible: false              # Default: false
  #
  #   # Monitoring and logging
  #   enableCloudwatchLogsExports:           # Optional, defaults to ["postgresql"] for PostgreSQL
  #     - postgresql
  #   enablePerformanceInsights: true
  #   performanceInsightsRetentionPeriod: 7
  #   performanceInsightsKmsKeyId: ""       # Optional KMS key for PI
  #   monitoringInterval: 60                 # Enhanced monitoring interval in seconds (0, 1, 5, 10, 15, 30, 60)
  #   monitoringRoleArn: ""                 # IAM role ARN for enhanced monitoring
  #
  #   # High availability
  #   availabilityZones:                     # Optional, let AWS choose if not specified
  #     - us-east-2a
  #     - us-east-2b
  #
  #   # Parameter groups (optional)
  #   parameterGroupFamily: aurora-postgresql16  # Default based on engine version
  #   clusterParameters:                     # Cluster-level parameters
  #     - name: shared_preload_libraries
  #       value: pg_stat_statements
  #   instanceParameters:                    # Instance-level parameters
  #     - name: log_min_duration_statement
  #       value: "1000"
  #       applyMethod: immediate             # immediate or pending-reboot
  #
  #   # IAM policy and role attachment
  #   createPolicy: true                     # Create IAM policy for RDS access
  #   attachToRoles:                        # IRSA roles to attach the policy to
  #     - platform-api-qa
  #     - worker-service-qa
  #
  #   # Secret creation (optional)
  #   createSecret: true                     # Create K8s secret with connection details
  #   secretNamespace: default               # Namespace for the connection secret
  #   customClusterSuffix: ""               # Custom suffix for cluster endpoint (usually auto-generated)
  #   port: 5432                            # Default: 5432 for PostgreSQL, 3306 for MySQL
  #
  #   # Additional settings
  #   autoMinorVersionUpgrade: true          # Auto upgrade minor versions
  #   copyTagsToSnapshot: true              # Copy tags to snapshots
  #
  #   # Custom tags
  #   tags:
  #     application: my-app
  #     backup: "true"
  #
  #   # ============================================================================
  #   # AUTOMATIC CONNECTION SECRET
  #   # ============================================================================
  #   # Crossplane automatically creates a Kubernetes secret with connection details:
  #   #   Secret name: {cluster-name}-connection-info
  #   #   Namespace: crossplane-system (or global.namespace)
  #   #
  #   # The secret contains:
  #   #   - endpoint: RDS cluster endpoint
  #   #   - port: Database port
  #   #   - username: Master username
  #   #   - password: Auto-generated password
  #   #   - dbname: Database name
  #   #
  #   # To use in your app:
  #   #   1. Reference the secret in your deployment
  #   #   2. Mount as environment variables or volume
  #   #
  #   # Example:
  #   #   envFrom:
  #   #     - secretRef:
  #   #         name: my-app-db-qa-connection-info
  #   #
  #   # The developer never sees the password - it's auto-generated and stored in the secret!

# Route53 DNS record configurations
route53:
  records: []
  # Example DNS record configurations:
  # - name: api-record                      # Crossplane resource name (must be unique)
  #   recordName: api.example.com           # DNS record name (FQDN)
  #   type: A                               # Record type: A, AAAA, CNAME, MX, TXT, NS, SRV, PTR, etc.
  #   ttl: 300                              # TTL in seconds (optional, default varies by AWS)
  #
  #   # Zone identification (choose one):
  #   zoneId: Z1234567890ABC                # Direct zone ID
  #   # OR
  #   zoneIdRef: my-hosted-zone             # Reference to a Crossplane HostedZone resource
  #   # OR
  #   zoneIdSelector:                       # Select zone by labels
  #     app.kubernetes.io/name: my-zone
  #
  #   # Simple records (A, AAAA, CNAME, TXT, etc.):
  #   records:
  #     - "192.0.2.1"                       # For A record
  #     - "192.0.2.2"                       # Multiple IPs for round-robin
  #
  # - name: www-cname
  #   recordName: www.example.com
  #   type: CNAME
  #   ttl: 300
  #   zoneId: Z1234567890ABC
  #   records:
  #     - "example.com"
  #
  # - name: txt-record
  #   recordName: _verification.example.com
  #   type: TXT
  #   ttl: 300
  #   zoneId: Z1234567890ABC
  #   records:
  #     - '"v=spf1 include:_spf.example.com ~all"'
  #
  # - name: mx-record
  #   recordName: example.com
  #   type: MX
  #   ttl: 300
  #   zoneId: Z1234567890ABC
  #   records:
  #     - "10 mail1.example.com"
  #     - "20 mail2.example.com"
  #
  # # Alias records (for AWS resources like ELB, CloudFront, S3, etc.):
  # - name: alb-alias
  #   recordName: app.example.com
  #   type: A
  #   zoneId: Z1234567890ABC
  #   alias:
  #     name: my-alb-123456.us-east-2.elb.amazonaws.com
  #     zoneId: Z3AADJGX6KTTL2             # ELB zone ID (region-specific)
  #     evaluateTargetHealth: true
  #
  # # Advanced routing policies:
  # # Weighted routing:
  # - name: weighted-record-1
  #   recordName: app.example.com
  #   type: A
  #   ttl: 60
  #   zoneId: Z1234567890ABC
  #   setIdentifier: "server-1"
  #   weight: 70                            # 70% of traffic
  #   records:
  #     - "192.0.2.1"
  #
  # - name: weighted-record-2
  #   recordName: app.example.com
  #   type: A
  #   ttl: 60
  #   zoneId: Z1234567890ABC
  #   setIdentifier: "server-2"
  #   weight: 30                            # 30% of traffic
  #   records:
  #     - "192.0.2.2"
  #
  # # Latency-based routing:
  # - name: latency-us-east
  #   recordName: app.example.com
  #   type: A
  #   ttl: 60
  #   zoneId: Z1234567890ABC
  #   setIdentifier: "us-east-1"
  #   latencyRoutingPolicy:
  #     region: us-east-1
  #   records:
  #     - "192.0.2.1"
  #
  # # Geolocation routing:
  # - name: geo-us
  #   recordName: app.example.com
  #   type: A
  #   ttl: 60
  #   zoneId: Z1234567890ABC
  #   setIdentifier: "us-users"
  #   geolocationRoutingPolicy:
  #     country: US                         # ISO 3166-1 alpha-2 country code
  #     # subdivision: CA                   # Optional: state/province code
  #   records:
  #     - "192.0.2.1"
  #
  # # Failover routing:
  # - name: failover-primary
  #   recordName: app.example.com
  #   type: A
  #   ttl: 60
  #   zoneId: Z1234567890ABC
  #   setIdentifier: "primary"
  #   failoverRoutingPolicy:
  #     type: PRIMARY
  #   healthCheckId: abc123                 # Health check ID
  #   records:
  #     - "192.0.2.1"
  #
  # - name: failover-secondary
  #   recordName: app.example.com
  #   type: A
  #   ttl: 60
  #   zoneId: Z1234567890ABC
  #   setIdentifier: "secondary"
  #   failoverRoutingPolicy:
  #     type: SECONDARY
  #   records:
  #     - "192.0.2.2"
  #
  # # Multi-value answer routing:
  # - name: multivalue-1
  #   recordName: app.example.com
  #   type: A
  #   ttl: 60
  #   zoneId: Z1234567890ABC
  #   setIdentifier: "server-1"
  #   multiValueAnswerRoutingPolicy: true
  #   records:
  #     - "192.0.2.1"
  #
  # # Additional options:
  # - name: custom-record
  #   recordName: test.example.com
  #   type: A
  #   ttl: 300
  #   zoneId: Z1234567890ABC
  #   allowOverwrite: true                  # Allow overwriting existing records
  #   records:
  #     - "192.0.2.100"
  #   tags:
  #     purpose: testing
  #     managed-by: platform-team
